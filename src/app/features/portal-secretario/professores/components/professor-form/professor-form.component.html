<div class="fixed inset-0 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto border-2 border-gray-300" (click)="$event.stopPropagation()">
    <div class="p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold text-gray-800">{{ professor?.id ? 'Editar Professor' : 'Adicionar Novo Professor' }}</h2>
        <p-button 
          icon="pi pi-times"
          severity="secondary"
          [text]="true"
          [rounded]="true"
          size="large"
          (onClick)="close.emit()"
          class="!p-2">
        </p-button>
      </div>
      
      <form [formGroup]="professorForm" (ngSubmit)="onSubmit()">
        
        <!-- Dados Básicos -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="nomeCompleto" class="block text-sm font-medium text-gray-700 mb-2">Nome Completo *</label>
            <input pInputText
                   id="nomeCompleto" 
                   formControlName="nomeCompleto"
                   placeholder="Digite o nome completo"
                   class="w-full"
                   [class.ng-invalid]="isFieldInvalid('nomeCompleto')">
          </div>
          
          <div>
            <label for="cpf" class="block text-sm font-medium text-gray-700 mb-2">CPF *</label>
            <p-inputMask formControlName="cpf"
                         mask="999.999.999-99"
                         placeholder="000.000.000-00"
                         class="w-full"
                         [class.ng-invalid]="isFieldInvalid('cpf')">
            </p-inputMask>
          </div>
          
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
            <input pInputText
                   id="email" 
                   type="email"
                   formControlName="email"
                   placeholder="email@exemplo.com"
                   class="w-full"
                   [class.ng-invalid]="isFieldInvalid('email')">
          </div>
          
          <div>
            <label for="telefone" class="block text-sm font-medium text-gray-700 mb-2">Telefone *</label>
            <p-inputMask formControlName="telefone"
                         mask="(99) 99999-9999"
                         placeholder="(00) 00000-0000"
                         class="w-full"
                         [class.ng-invalid]="isFieldInvalid('telefone')">
            </p-inputMask>
          </div>
          
          <div>
            <label for="dataNascimento" class="block text-sm font-medium text-gray-700 mb-2">Data de Nascimento</label>
            <p-calendar formControlName="dataNascimento"
                        placeholder="Selecione a data"
                        [showIcon]="true"
                        dateFormat="dd/mm/yy"
                        class="w-full">
            </p-calendar>
          </div>
          
          <div>
            <label for="status" class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
            <p-dropdown [options]="statusOptions"
                        formControlName="status"
                        placeholder="Selecione o status"
                        class="w-full"
                        [class.ng-invalid]="isFieldInvalid('status')">
            </p-dropdown>
          </div>
        </div>

        <!-- Dados Profissionais -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label for="materias" class="block text-sm font-medium text-gray-700 mb-2">Matérias *</label>
            <p-multiSelect [options]="materiasOptions"
                           formControlName="materias"
                           placeholder="Selecione as matérias"
                           class="w-full"
                           [class.ng-invalid]="isFieldInvalid('materias')">
            </p-multiSelect>
          </div>
          
          <div>
            <label for="cargaHoraria" class="block text-sm font-medium text-gray-700 mb-2">Carga Horária Semanal *</label>
            <p-inputNumber formControlName="cargaHoraria"
                           [min]="1"
                           [max]="60"
                           suffix=" horas"
                           placeholder="40"
                           class="w-full"
                           [class.ng-invalid]="isFieldInvalid('cargaHoraria')">
            </p-inputNumber>
          </div>
          
          <div>
            <label for="salario" class="block text-sm font-medium text-gray-700 mb-2">Salário *</label>
            <p-inputNumber formControlName="salario"
                           mode="currency"
                           currency="BRL"
                           locale="pt-BR"
                           [min]="0"
                           placeholder="0,00"
                           class="w-full"
                           [class.ng-invalid]="isFieldInvalid('salario')">
            </p-inputNumber>
          </div>
          
          <div>
            <label for="dataAdmissao" class="block text-sm font-medium text-gray-700 mb-2">Data de Admissão</label>
            <p-calendar formControlName="dataAdmissao"
                        placeholder="Selecione a data"
                        [showIcon]="true"
                        dateFormat="dd/mm/yy"
                        class="w-full">
            </p-calendar>
          </div>
        </div>

        <!-- Endereço -->
        <div formGroupName="endereco" class="mb-6">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Endereço</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label for="cep" class="block text-sm font-medium text-gray-700 mb-2">CEP</label>
              <p-inputMask formControlName="cep"
                           mask="99999-999"
                           placeholder="00000-000"
                           class="w-full">
              </p-inputMask>
            </div>
            
            <div class="md:col-span-2">
              <label for="logradouro" class="block text-sm font-medium text-gray-700 mb-2">Logradouro</label>
              <input pInputText
                     id="logradouro" 
                     formControlName="logradouro"
                     placeholder="Rua, Avenida, etc."
                     class="w-full">
            </div>
            
            <div>
              <label for="numero" class="block text-sm font-medium text-gray-700 mb-2">Número</label>
              <input pInputText
                     id="numero" 
                     formControlName="numero"
                     placeholder="123"
                     class="w-full">
            </div>
            
            <div>
              <label for="complemento" class="block text-sm font-medium text-gray-700 mb-2">Complemento</label>
              <input pInputText
                     id="complemento" 
                     formControlName="complemento"
                     placeholder="Apto, Bloco, etc."
                     class="w-full">
            </div>
            
            <div>
              <label for="bairro" class="block text-sm font-medium text-gray-700 mb-2">Bairro</label>
              <input pInputText
                     id="bairro" 
                     formControlName="bairro"
                     placeholder="Nome do bairro"
                     class="w-full">
            </div>
            
            <div>
              <label for="cidade" class="block text-sm font-medium text-gray-700 mb-2">Cidade</label>
              <input pInputText
                     id="cidade" 
                     formControlName="cidade"
                     placeholder="Nome da cidade"
                     class="w-full">
            </div>
            
            <div>
              <label for="uf" class="block text-sm font-medium text-gray-700 mb-2">UF</label>
              <input pInputText
                     id="uf" 
                     formControlName="uf"
                     placeholder="SP"
                     maxlength="2"
                     class="w-full">
            </div>
          </div>
        </div>

        <!-- Formação Acadêmica -->
        <div formGroupName="formacaoAcademica" class="mb-6">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Formação Acadêmica</h3>
          
          <!-- Graduação -->
          <h4 class="text-md font-medium text-gray-700 mb-3">Graduação *</h4>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <label for="graduacao" class="block text-sm font-medium text-gray-700 mb-2">Curso *</label>
              <input pInputText
                     id="graduacao" 
                     formControlName="graduacao"
                     placeholder="Ex: Licenciatura em Matemática"
                     class="w-full"
                     [class.ng-invalid]="isFieldInvalid('formacaoAcademica.graduacao')">
            </div>
            
            <div>
              <label for="instituicao" class="block text-sm font-medium text-gray-700 mb-2">Instituição *</label>
              <input pInputText
                     id="instituicao" 
                     formControlName="instituicao"
                     placeholder="Ex: Universidade de São Paulo"
                     class="w-full"
                     [class.ng-invalid]="isFieldInvalid('formacaoAcademica.instituicao')">
            </div>
            
            <div>
              <label for="anoConclusao" class="block text-sm font-medium text-gray-700 mb-2">Ano de Conclusão</label>
              <p-inputNumber formControlName="anoConclusao"
                             [useGrouping]="false"
                             [min]="1950"
                             [max]="2050"
                             placeholder="2020"
                             class="w-full">
              </p-inputNumber>
            </div>
          </div>
          
          <!-- Pós-Graduação -->
          <h4 class="text-md font-medium text-gray-700 mb-3">Pós-Graduação</h4>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <label for="posGraduacao" class="block text-sm font-medium text-gray-700 mb-2">Curso</label>
              <input pInputText
                     id="posGraduacao" 
                     formControlName="posGraduacao"
                     placeholder="Ex: Especialização em Educação Matemática"
                     class="w-full">
            </div>
            
            <div>
              <label for="instituicaoPosGrad" class="block text-sm font-medium text-gray-700 mb-2">Instituição</label>
              <input pInputText
                     id="instituicaoPosGrad" 
                     formControlName="instituicaoPosGrad"
                     placeholder="Ex: UNICAMP"
                     class="w-full">
            </div>
            
            <div>
              <label for="anoConclusaoPosGrad" class="block text-sm font-medium text-gray-700 mb-2">Ano de Conclusão</label>
              <p-inputNumber formControlName="anoConclusaoPosGrad"
                             [useGrouping]="false"
                             [min]="1950"
                             [max]="2050"
                             placeholder="2022"
                             class="w-full">
              </p-inputNumber>
            </div>
          </div>
          
          <!-- Mestrado -->
          <h4 class="text-md font-medium text-gray-700 mb-3">Mestrado</h4>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <label for="mestrado" class="block text-sm font-medium text-gray-700 mb-2">Curso</label>
              <input pInputText
                     id="mestrado" 
                     formControlName="mestrado"
                     placeholder="Ex: Mestrado em Educação"
                     class="w-full">
            </div>
            
            <div>
              <label for="instituicaoMestrado" class="block text-sm font-medium text-gray-700 mb-2">Instituição</label>
              <input pInputText
                     id="instituicaoMestrado" 
                     formControlName="instituicaoMestrado"
                     placeholder="Ex: USP"
                     class="w-full">
            </div>
            
            <div>
              <label for="anoConclusaoMestrado" class="block text-sm font-medium text-gray-700 mb-2">Ano de Conclusão</label>
              <p-inputNumber formControlName="anoConclusaoMestrado"
                             [useGrouping]="false"
                             [min]="1950"
                             [max]="2050"
                             placeholder="2024"
                             class="w-full">
              </p-inputNumber>
            </div>
          </div>
          
          <!-- Doutorado -->
          <h4 class="text-md font-medium text-gray-700 mb-3">Doutorado</h4>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label for="doutorado" class="block text-sm font-medium text-gray-700 mb-2">Curso</label>
              <input pInputText
                     id="doutorado" 
                     formControlName="doutorado"
                     placeholder="Ex: Doutorado em Educação Matemática"
                     class="w-full">
            </div>
            
            <div>
              <label for="instituicaoDoutorado" class="block text-sm font-medium text-gray-700 mb-2">Instituição</label>
              <input pInputText
                     id="instituicaoDoutorado" 
                     formControlName="instituicaoDoutorado"
                     placeholder="Ex: UNESP"
                     class="w-full">
            </div>
            
            <div>
              <label for="anoConclusaoDoutorado" class="block text-sm font-medium text-gray-700 mb-2">Ano de Conclusão</label>
              <p-inputNumber formControlName="anoConclusaoDoutorado"
                             [useGrouping]="false"
                             [min]="1950"
                             [max]="2050"
                             placeholder="2026"
                             class="w-full">
              </p-inputNumber>
            </div>
          </div>
        </div>

        <!-- Experiência Profissional -->
        <div formGroupName="experienciaProfissional" class="mb-6">
          <h3 class="text-lg font-medium text-gray-800 mb-4">Experiência Profissional</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label for="tempoExperiencia" class="block text-sm font-medium text-gray-700 mb-2">Tempo de Experiência (anos)</label>
              <p-inputNumber formControlName="tempoExperiencia"
                             [min]="0"
                             [max]="50"
                             suffix=" anos"
                             placeholder="5"
                             class="w-full">
              </p-inputNumber>
            </div>
            
            <div>
              <label for="escolasAnteriores" class="block text-sm font-medium text-gray-700 mb-2">Escolas Anteriores</label>
              <input pInputText
                     id="escolasAnteriores" 
                     formControlName="escolasAnteriores"
                     placeholder="Ex: Escola Municipal João Silva, Colégio Estadual..."
                     class="w-full">
            </div>
            
            <div class="md:col-span-2">
              <label for="especialidades" class="block text-sm font-medium text-gray-700 mb-2">Especialidades</label>
              <p-multiSelect [options]="materiasOptions"
                             formControlName="especialidades"
                             placeholder="Selecione as especialidades"
                             class="w-full">
              </p-multiSelect>
            </div>
          </div>
        </div>

        <!-- Botões -->
        <div class="flex justify-end space-x-4 pt-4 border-t">
          <p-button 
            label="Cancelar"
            icon="pi pi-times"
            severity="secondary"
            (onClick)="close.emit()">
          </p-button>
          
          <p-button 
            label="Salvar"
            icon="pi pi-check"
            type="submit"
            [disabled]="professorForm.invalid">
          </p-button>
        </div>
      </form>
    </div>
  </div>
</div>
